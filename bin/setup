#!/usr/bin/env bash
# vim: ft=bash
#
# shdoc installation helper.
#
# © 2020 github.com/kigster
# Contributed by Konstantin Gredeskoul, under the MIT License
#
#————————————————————————————————————————————————————————————
 
export txtblk='\e[0;30m' # Black - Regular
export txtred='\e[0;31m' # Red
export txtgrn='\e[0;32m' # Green
export txtylw='\e[0;33m' # Yellow
export txtblu='\e[0;34m' # Blue
export txtpur='\e[0;35m' # Purple
export txtcyn='\e[0;36m' # Cyan
export txtwht='\e[0;37m' # White
export clr='\e[0m'       # Text Reset

export osnameS
osname="$(uname -s | tr '[:upper:]' '[:lower:]')"

export okay="${clr}${txtgrn}[ ✔ ] ${txtblu}"
export fail="${clr}${txtred}[ ⨯ ] ${txtylw}"

function smack() {
  printf -- "${fail}${txtred}%s${clr}\n" "$*"
}

function quack() {
  printf -- "${okay}${txtblu}%s${clr}\n" "$*"
}

function br() {
  echo
}

function shdoc::setup::main() {
  local script="./bin/setup-${osname}"
  if [[ -x "${script}" ]]; then
    quack "Found setup script for ${osname} OS, running it."
    # shellcheck disable=SC1090
    source "${script}"
    shdoc::setup::install
  else
    smack "Unfortunately your OS is not supported by the setup script."
    exit 1
  fi
}

shdoc::setup::main "$@"
